# SIDARSIH Cloudflare Tunnel Environment Configuration
# Production Environment for Proxmox Server
# Generated: $(date '+%Y-%m-%d %H:%M:%S')

# ========================================
# TUNNEL CONFIGURATION
# ========================================
TUNNEL_ID=e4cee886-4f46-4676-a344-7ea2cb86e4eb
TUNNEL_NAME=sidarsih
DOMAIN=sidarsih.site
CREDENTIALS_FILE=/home/dell/.cloudflared/e4cee886-4f46-4676-a344-7ea2cb86e4eb.json
CONFIG_FILE=/home/dell/KP2A-CIMAHI/KP2A/cloudflared-config-proxmox.yml

# ========================================
# SERVICE PORTS ALLOCATION
# ========================================
# Production Services
FRONTEND_PORT=8080
BACKEND_PORT=3001
WHATSAPP_PORT=3001

# New Tunnel Services (3000-4000 range)
TUNNEL_MANAGEMENT_PORT=3002
HEALTH_CHECK_PORT=3003
METRICS_PORT=3004

# Development Services
DEV_PORT=5173
CLOUDFLARED_METRICS_PORT=8081
STATIC_ASSETS_PORT=8082

# ========================================
# MONITORING CONFIGURATION
# ========================================
HEALTH_CHECK_INTERVAL=30000
MAX_RESTARTS=5
RESTART_WINDOW=300000
RESPONSE_TIMEOUT=10000
HEARTBEAT_INTERVAL=5000
CONNECTION_TIMEOUT=30000

# ========================================
# LOGGING CONFIGURATION
# ========================================
LOG_LEVEL=info
LOG_RETENTION_DAYS=30
MAX_LOG_SIZE=10M
LOG_DIR=/home/dell/KP2A-CIMAHI/KP2A/logs
ERROR_LOG_FILE=tunnel-error.log
ACCESS_LOG_FILE=tunnel-access.log
COMBINED_LOG_FILE=tunnel-combined.log

# ========================================
# SECURITY CONFIGURATION
# ========================================
ENABLE_SECURITY_CHECKS=true
ENABLE_RATE_LIMITING=true
MAX_REQUESTS_PER_MINUTE=1000
BURST_SIZE=100
ENABLE_ACCESS_LOGS=true
SECURE_HEADERS=true

# ========================================
# PM2 CONFIGURATION
# ========================================
PM2_APP_NAME=sidarsih-cloudflare-tunnel
PM2_INSTANCES=1
PM2_EXEC_MODE=fork
PM2_MAX_MEMORY_RESTART=512M
PM2_RESTART_DELAY=5000
PM2_MAX_RESTARTS=15
PM2_MIN_UPTIME=30s
PM2_WATCH=false
PM2_IGNORE_WATCH=node_modules,logs,*.log

# ========================================
# PERFORMANCE TUNING
# ========================================
COMPRESSION=gzip
KEEP_ALIVE_CONNECTIONS=10
KEEP_ALIVE_TIMEOUT=90s
TCP_KEEP_ALIVE=30s
CONNECT_TIMEOUT=30s
TLS_TIMEOUT=10s
GRACE_PERIOD=30s
RETRIES=5

# ========================================
# CLOUDFLARE EDGE CONFIGURATION
# ========================================
REGION=auto
PROTOCOL=auto
HTTP2_ORIGIN=true
WEBSOCKET_COMPRESSION=true
NO_CHUNKED_ENCODING=false
CONNECTION_POOL_SIZE=4
MAX_UPSTREAM_CONNS=10

# ========================================
# BACKUP CONFIGURATION
# ========================================
BACKUP_DIR=/home/dell/backups/tunnel-configs
BACKUP_RETENTION_DAYS=7
AUTO_BACKUP=true

# ========================================
# NOTIFICATION CONFIGURATION
# ========================================
ENABLE_NOTIFICATIONS=true
NOTIFICATION_WEBHOOK_URL=
SLACK_WEBHOOK_URL=
EMAIL_NOTIFICATIONS=false
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=

# ========================================
# DEVELOPMENT SETTINGS
# ========================================
NODE_ENV=production
DEBUG=false
VERBOSE_LOGGING=false

# ========================================
# SYSTEM PATHS
# ========================================
PROJECT_DIR=/home/dell/KP2A-CIMAHI/KP2A
SCRIPTS_DIR=/home/dell/KP2A-CIMAHI/KP2A/scripts
PIDS_DIR=/home/dell/KP2A-CIMAHI/KP2A/pids
TEMP_DIR=/tmp/sidarsih-tunnel

# ========================================
# HEALTH CHECK ENDPOINTS
# ========================================
HEALTH_CHECK_URL=http://localhost:3003/health
METRICS_URL=http://localhost:3004/metrics
STATUS_URL=http://localhost:8081/metrics

# ========================================
# FAILOVER CONFIGURATION
# ========================================
ENABLE_FAILOVER=true
FAILOVER_TIMEOUT=60s
BACKUP_TUNNEL_CONFIG=
EMERGENCY_CONTACT=admin@sidarsih.site